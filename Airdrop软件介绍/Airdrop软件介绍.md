## <center>airdropè½¯ä»¶ä»‹ç»</center>
<center>41911166è‘£æ–‡ä½³ 41911138     ç‰›æ–°ä¸€</center>

### **å…³é”®åŠŸèƒ½**
<p style="text-indent:2em">å½“ç”µè„‘å’Œæ‰‹æœºå¤„äºåŒä¸€å±€åŸŸç½‘æ—¶ï¼Œæœ¬è½¯ä»¶å¯ä»¥å®ç°å¦‚ä¸‹ä¸‰ä¸ªåŠŸèƒ½ï¼š</p>

1. æ‰‹æœºç«¯å¯ä»¥åœ¨æµè§ˆå™¨ç½‘é¡µä¸Šä¸‹è½½ç”µè„‘ç«¯çš„æ–‡ä»¶ã€‚
2. æ‰‹æœºç«¯å¤åˆ¶æ–‡å­—ï¼Œå¯ä»¥åœ¨ç”µè„‘ç«¯ç²˜è´´
3. ç”µè„‘ç«¯å¤åˆ¶æ–‡å­—ï¼Œå¯ä»¥åœ¨æ‰‹æœºç«¯ç²˜è´´
### **è½¯ä»¶ä½¿ç”¨**

**è½¯ä»¶ä½¿ç”¨å‰æï¼š**
1. æ‰‹æœºç«¯ä¸ç”µè„‘ç«¯å¤„äºåŒä¸€å±€åŸŸç½‘ä¸‹ã€‚
2. ä½¿ç”¨è€…æ‹¥æœ‰è¯¥è½¯ä»¶çš„ä¸€ä¸ªè´¦å·ã€‚

**è½¯ä»¶çš„æ³¨å†Œæ–¹æ³•ï¼š**
<p style="text-indent:2em">æœ¬è½¯ä»¶è´¦å·æ³¨å†Œçš„æ–¹æ³•ååˆ†ç®€å•ï¼Œç”¨æˆ·åªéœ€è¦è¾“å…¥æ–°å¸å·çš„ç”¨æˆ·åä¸ç”¨æˆ·å¯†ç ï¼Œç‚¹å‡»æ³¨å†Œï¼Œå³å¯æ³¨å†Œä¸€ä¸ªæ–°çš„è´¦å·ã€‚æ³¨å†Œè¿‡ç¨‹ä¸­ä¸éœ€è¦é€šè¿‡é‚®ç®±ã€çŸ­ä¿¡ç­‰æ–¹å¼å‘é€éªŒè¯ç è¿›è¡ŒéªŒè¯ï¼Œåªè¦æ–°è´¦å·çš„ç”¨æˆ·åæœªè¢«å…¶ä»–äººä½¿ç”¨ï¼Œå³å¯æ³¨å†ŒæˆåŠŸã€‚</p>

**ç”µè„‘ç«¯å‘é€æ–‡ä»¶ï¼Œæ‰‹æœºç«¯ä¸‹è½½æ–‡ä»¶åŠŸèƒ½çš„ä½¿ç”¨æ–¹æ³•ï¼š**

ç¬¬ä¸€æ­¥ï¼Œç”¨æˆ·éœ€è¦è¾“å…¥æ­£ç¡®çš„ç”¨æˆ·åå’Œå¯†ç ç™»å½•åˆ°å¦‚ä¸‹ç•Œé¢ï¼š![ç™»é™†ç•Œé¢](1.png)
 
ç¬¬äºŒæ­¥ï¼Œç”¨æˆ·éœ€è¦è¾“å…¥ç”µè„‘ä¸æ‰‹æœºæ‰€åœ¨å±€åŸŸç½‘çš„ipåœ°å€ï¼Œç‚¹å‡»è¿æ¥æŒ‰é’®ï¼Œè·³è½¬åˆ°æµè§ˆå™¨çš„ä¸‹è½½ç½‘é¡µï¼Œç½‘é¡µå¦‚ä¸‹ï¼š![ä¸‹è½½ç•Œé¢](2.jpg)
 
ç¬¬ä¸‰æ­¥ï¼Œç”¨æˆ·ç‚¹å‡»æƒ³è¦ä¸‹è½½çš„æ–‡ä»¶ï¼Œå³å¯å®Œæˆä¸‹è½½ã€‚

**ç”µè„‘ç«¯å¤åˆ¶æ‰‹æœºç«¯ç²˜è´´åŠŸèƒ½çš„ä½¿ç”¨æ–¹æ³•ï¼š**

ç¬¬ä¸€æ­¥ï¼Œç”¨æˆ·éœ€è¦è¾“å…¥ç”µè„‘ä¸æ‰‹æœºæ‰€åœ¨å±€åŸŸç½‘çš„ipåœ°å€ã€‚

ç¬¬äºŒæ­¥ï¼Œç”¨æˆ·éœ€è¦åœ¨ç”µè„‘ç«¯å°†å†…å®¹å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ã€‚

ç¬¬ä¸‰æ­¥ï¼Œç‚¹å‡»â€œä»ç”µè„‘åˆ°æ‰‹æœºâ€æŒ‰é’®ï¼Œç”µè„‘ç«¯å¤åˆ¶çš„å†…å®¹å³å¯å‡ºç°åœ¨æŒ‰é’®ä¸Šæ–¹çš„æ–‡æœ¬æ¡†å†…ã€‚

**æ‰‹æœºç«¯å¤åˆ¶ç”µè„‘ç«¯ç²˜è´´åŠŸèƒ½çš„ä½¿ç”¨æ–¹æ³•ï¼š**

ç¬¬ä¸€æ­¥ï¼Œç”¨æˆ·éœ€è¦è¾“å…¥ç”µè„‘ä¸æ‰‹æœºæ‰€åœ¨å±€åŸŸç½‘çš„ipåœ°å€ã€‚

ç¬¬äºŒæ­¥ï¼Œç”¨æˆ·éœ€è¦åœ¨æ‰‹æœºç«¯å°†å†…å®¹å¤åˆ¶åˆ°â€œä»æ‰‹æœºåˆ°ç”µè„‘â€æŒ‰é’®ä¸Šæ–¹çš„è¾“å…¥æ¡†ã€‚

ç¬¬ä¸‰æ­¥ï¼Œç‚¹å‡»â€œä»æ‰‹æœºåˆ°ç”µè„‘â€æŒ‰é’®ï¼Œæ‰‹æœºç«¯å¤åˆ¶çš„å†…å®¹å³å¯å‡ºç°ç”µè„‘ç«¯çš„å‰ªåˆ‡æ¿å†…ã€‚

### **å…³é”®ä»£ç **
<p style="text-indent:2em">æˆ‘ä»¬å°†æ‰‹æœºå’Œç”µè„‘ä½œä¸ºä¸åŒçš„å®¢æˆ·ç«¯ï¼Œä½¿ç”¨äº†ä¸€ä¸ªç¬¬ä¸‰æ–¹æœåŠ¡å™¨ä½œä¸ºäº‘Clipboardï¼Œéƒ¨ç½²åœ¨å…¬ç½‘ä¸Šï¼ˆhttps://cloudcb.herokuapp.com/ï¼‰ï¼Œå¹¶ä¸”åŠ å…¥äº†tokençš„éªŒè¯ï¼Œæ”¯æŒå¤šä¸ªç”¨æˆ·ä½¿ç”¨ï¼Œå„ä¸ªç”¨æˆ·é€šè¿‡ç”¨æˆ·ååŠ ä»¥åŒºåˆ†ã€‚</p>

**æ‰‹æœºç«¯ç”¨æˆ·ç™»é™†å‡½æ•°**

    def login(self, button):
        token = "%s:%s" % (self.username_w.text, self.password_w.text)
        token = base64.b64encode(token.encode('utf-8')).decode('utf-8')
        login_res = UrlRequest(
            "%sverify-user/" % SERVER_URI,
            req_headers = {'Authorization': "Basic %s" % token},
            on_success = self.store_data(token),
            on_error = utils.show_error,
            on_failure = self.show_failure
        )
<p style="text-indent:2em">åœ¨ç¬¬ä¸‰æ–¹ç½‘ç«™ç”¨æˆ·æ•°æ®åº“ä¸­æŸ¥æ‰¾ç™»å½•çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œè‹¥æ‰¾åˆ°å³å¯ç™»é™†æˆåŠŸã€‚</p>

**æ‰‹æœºç«¯ä¸Šä¼ å‡½æ•°**

    def upload(self, *args):
        payload = urllib.urlencode({'text': self.old_text})  # python2
        self.header['Content-type'] = 'application/x-www-form-urlencoded'
        copy_res = UrlRequest(
            self.url,
            req_headers = self.header,
            req_body = payload,
            on_success = self.paste,
            on_error = utils.show_error,
            on_failure = self.show_failure
        )
<p style="text-indent:2em">è¿™é‡Œä½¿ç”¨äº†urllib.urlencode()å‡½æ•°ï¼Œç»“åˆUrlRequest()æ–¹æ³•ï¼Œå®ç°uploadæ–¹æ³•ï¼Œå°†æ‰‹æœºç«¯çš„æ–‡å­—è¾“å‡ºåˆ°ç¬¬ä¸‰æ–¹ç½‘ç«™è¯¥ç”¨æˆ·çš„ç”¨æˆ·æ—¥å¿—ä¸Šã€‚</p>

**æ‰‹æœºç«¯ä¸‹è½½å‡½æ•°**

    def download(self, *args):
        self.paste_res = UrlRequest(
            self.url,
            req_headers = self.header,
            on_success = self.paste,
            on_error = utils.show_error,
            on_failure = self.show_failure
        )
<p style="text-indent:2em">è¿™é‡Œç›´æ¥ä½¿ç”¨UrlRequest()å‡½æ•°è·å–ç¬¬ä¸‰æ–¹ç½‘ç«™ä¸Šçš„ç”¨æˆ·æ—¥å¿—çš„å†…å®¹ã€‚</p>

**ç”µè„‘ç«¯ä¸Šä¼ å‡½æ•°**

    def upload(username, password):
        payload = {"text": copy(), "device": ""}
        res = requests.post(
            server_url+"copy-paste/",
            data = payload,
            auth = (username, password)
        )
        if res.status_code == 200:
            print("Succeses! Copied to Cloud-Clipboard.")
        else:
            print("Error: ", res.text)
            return False
        return True
<p style="text-indent:2em">ç›´æ¥è·å–å‰ªåˆ‡æ¿çš„å†…å®¹ï¼Œå°†å¾—åˆ°çš„æ–‡å­—ä¸ç”¨æˆ·ä¿¡æ¯ä½¿ç”¨post()æ–¹æ³•ä¸Šä¼ åˆ°ç¬¬ä¸‰æ–¹ç½‘ç«™ä¸Šã€‚</p>

**ç”µè„‘ç«¯ä¸‹è½½å‡½æ•°**

    def download(username, password):
        res = requests.get(server_url+"copy-paste/", auth=(username, password))
        if res.status_code == 200:
            paste(json.loads(res.text)["text"])
        else:
            print("Cannot download the data.")
            return False
        return True
<p style="text-indent:2em">é€šè¿‡ç”¨æˆ·åä¸å¯†ç åœ¨ç½‘ç«™ä¸Šæ‰¾åˆ°å¯¹åº”çš„æ•°æ®ä½¿ç”¨get()æ–¹æ³•è·å–ï¼Œå¹¶ä¸”æ›´æ–°åˆ°æœ¬åœ°çš„clipboard.</p>

### **å•å…ƒæµ‹è¯•**
<p style="text-indent:2em">åŠŸèƒ½ä¸€çš„æ ¸å¿ƒæ˜¯è·å¾—æœåŠ¡å™¨çš„ipï¼Œä»£ç é‡ç›¸å¯¹è¾ƒå°‘ï¼Œå› æ­¤æ²¡æœ‰å¯¹è·å¾—ipè¿™ä¸€åŠŸèƒ½ä¸€ä¸­çš„å…³é”®ä»£ç è¿›è¡Œæµ‹è¯•ã€‚ä½¿ç”¨Pythonæ ‡å‡†åº“ä¸­è‡ªå¸¦çš„unittestï¼Œå¯¹åŠŸèƒ½äºŒå¤åˆ¶ç²˜è´´çš„ç”µè„‘ç«¯è¿›è¡Œæµ‹è¯•ã€‚æµ‹è¯•ä¸»è¦åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šç”µè„‘ç«¯æ˜¯å¦èƒ½å¤ŸæŠŠå¤åˆ¶çš„æ–‡æœ¬ä¸Šä¼ åˆ°serveräº‘æœåŠ¡å™¨ï¼ˆtest_uploadå‡½æ•°ï¼‰ï¼Œç”µè„‘ç«¯èƒ½å¦ä»äº‘æœåŠ¡å™¨ä¸Šä¸‹è½½å…±äº«çš„clipboardä¸­çš„å†…å®¹ï¼Œå¹¶æ›´æ–°è‡ªå·±çš„clipboardï¼ˆtest_downloadå‡½æ•°ï¼‰ï¼Œç”µè„‘ç«¯èƒ½å¦æˆåŠŸæ³¨å†Œï¼ˆtest_registerå‡½æ•°ï¼‰ã€‚æµ‹è¯•ä½¿ç”¨è‡ªå¸¦çš„assertTrueå‡½æ•°ï¼Œå¦‚æœä¸º trueï¼Œåˆ™è¿è¡Œ Successï¼Œåä¹‹æŠ¥é”™Failureã€‚æµ‹è¯•å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š

    import sys
    sys.path.append("..")
    import unittest
    import computer as pc
    class Test_computer(unittest.TestCase):

        def test_upload(self):
            self.assertTrue(pc.upload("bubble","123"))
            self.assertTrue(pc.upload("hh","123"))

        def test_download(self):
            self.assertTrue(pc.download("bubble","123"))
            self.assertTrue(pc.download("hh","123"))

        def test_register(self):
            self.assertTrue(pc.register("sky", "123"))
            self.assertTrue(pc.register("cloud","123"))

    if __name__ == '__main__':
        unittest.main()

&emsp;&emsp;ç”±äºä¹‹å‰å·²ç»æ³¨å†Œè¿‡redç”¨æˆ·å’Œpinkç”¨æˆ·ï¼Œå› æ­¤ç›´æ¥æ‰§è¡Œè¿™æ®µä»£ç ï¼Œæ— æ³•é€šè¿‡æ‰€æœ‰æµ‹è¯•ï¼Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š![æœªé€šè¿‡](3.jpg)

&emsp;&emsp;å°†å‡½æ•°registeré‡Œçš„å‚æ•°è®¾ç½®ä¸ºæœªæ³¨å†Œè¿‡çš„ç”¨æˆ·ï¼Œåˆ™ç¨‹åºè¿è¡Œæ˜¾ç¤ºé€šè¿‡æ‰€æœ‰å•å…ƒæµ‹è¯•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š![å·²é€šè¿‡](4.png)

### **æŒç»­é›†æˆ**

<p style="text-indent:2em">ä½¿ç”¨GitHubè‡ªå¸¦çš„æŒç»­é›†æˆæœåŠ¡GitHub Actionæ¥æµ‹è¯•æˆ‘ä»¬ä»£ç çš„å¯éƒ¨ç½²æ€§ã€‚GitHub Action æ˜¯æŒç»­é›†æˆ (Continuous integrationï¼Œç®€ç§° CI) æœåŠ¡ï¼Œå®ƒæä¾›äº†è™šæ‹ŸæœåŠ¡å™¨ç¯å¢ƒï¼ŒåŸºäºå®ƒå¯ä»¥è¿›è¡Œæ„å»ºã€æµ‹è¯•ã€æ‰“åŒ…ã€éƒ¨ç½²é¡¹ç›®ã€‚åœ¨GitHubä¸­æ–°å»ºä¸€ä¸ªworkflowsï¼Œé€šè¿‡è„šæœ¬ç¼–å†™actionsç»„åˆï¼Œä½¿å¾—ä¸Šä¼ çš„Airdropæ–‡ä»¶èƒ½å¤Ÿé€šè¿‡æµ‹è¯•ï¼Œæ­£å¸¸è¿è¡Œã€‚</p>
<p style="text-indent:2em">è®¾ç½®è¯¥ç¨‹åºè¿è¡Œçš„è™šæ‹Ÿç¯å¢ƒä¸ºwindowsç³»ç»Ÿï¼Œä½¿ç”¨python3.8ç‰ˆæœ¬ã€‚åœ¨æµ‹è¯•ç¨‹åºè¿è¡Œå‰ï¼Œå®‰è£…requirement.txtæ–‡ä»¶ä¸­çš„ç¬¬ä¸‰æ–¹åº“ï¼Œä½¿å¾—ç¨‹åºèƒ½å¤Ÿæ­£å¸¸è°ƒç”¨ç¬¬ä¸‰æ–¹åº“ä¸­çš„æ–¹æ³•è€Œä¸æŠ¥é”™ã€‚requirement.txtæ–‡ä»¶ä¸­çš„å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>

    requests==2.21.0
    pyperclip==1.6.2

<p style="text-indent:2em">æ„å»ºworkflowsçš„æ ¸å¿ƒå‘½ä»¤å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>

    name: GitHub Actions Demo
    on: [push]
    jobs:
      Explore-GitHub-Actions:
        runs-on: ubuntu-latest
        steps:
          - run: echo "ğŸ‰ The job was automatically triggered by a ${{ github.event_name }} event."
          - run: echo "ğŸ§ This job is now running on a ${{ runner.os }} server hosted by GitHub!"
          - run: echo "ğŸ” The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."
          - name: Check out repository code
            uses: actions/checkout@v3
          - run: echo "ğŸ’¡ The ${{ github.repository }} repository has been cloned to the runner."
          - run: echo "ğŸ–¥ï¸ The workflow is now ready to test your code on the runner."
          - name: List files in the repository
            run: |
          ls ${{ github.workspace }}
          - run: echo "ğŸ This job's status is ${{ job.status }}."
 
    Python-Test:
      runs-on: windows-latest
      steps:
        - name: Check out repository code
          uses: actions/checkout@v3
        - name: Set up Python 3.8
          uses: actions/setup-python@v1
          with:
          python-version: 3.8
        - name: Install dependencies
          run: cd ${{ github.workspace }}/Airdrop && pip install  -r ./requirements.txt
        - name: Test   with Python
          run: cd ${{ github.workspace }}/Airdrop && python ./test_computer.py
&emsp;&emsp;è®¾ç½®å¥½workflowsï¼ŒGitHubè‡ªåŠ¨å¯¹ä¸Šä¼ çš„Airdropä»£ç è¿›è¡Œäº†æµ‹è¯•ã€‚åœ¨æŒç»­é›†æˆä¸­ï¼Œæˆ‘ä»¬çš„ä»£ç é€šè¿‡äº†æµ‹è¯•ï¼Œæµ‹è¯•æˆåŠŸç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š![é›†æˆ](6.png)

### **è½¯ä»¶äº®ç‚¹**

**1.è½¯ä»¶ç•Œé¢è®¾è®¡ç®€æ´ï¼ŒåŸºç¡€åŠŸèƒ½å®Œå¤‡**
<p style="text-indent:2em">æˆ‘ä»¬çš„Androidè½¯ä»¶è®¾è®¡ç®€å•æ˜äº†ï¼Œç”¨æˆ·å¯ä»¥è¿…é€ŸæŒæ¡æ‰‹æœºç«¯å’Œç”µè„‘ç«¯å¤åˆ¶ç²˜è´´å…±äº«å‰ªåˆ‡æ¿çš„æ“ä½œæ–¹æ³•ã€‚åœ¨æ–‡ä»¶ä¼ è¾“åŠŸèƒ½ä¸­ï¼Œè½¯ä»¶è‡ªåŠ¨å¸®åŠ©ç”¨æˆ·æ‰“å¼€æœåŠ¡å™¨æä¾›çš„ç½‘å€ï¼Œæ— éœ€ç”¨æˆ·è¿›è¡Œé¢å¤–çš„æœç´¢ç½‘å€æ“ä½œã€‚</p>

**2.é¢å¤–å®ç°äº†ç”µè„‘å¤åˆ¶ï¼Œæ‰‹æœºç²˜è´´åŠŸèƒ½**
<p style="text-indent:2em">é™¤äº†å®ç°æ–‡ä»¶ä¼ è¾“å’Œæ‰‹æœºç«¯å¤åˆ¶ï¼Œç”µè„‘ç«¯ç²˜è´´çš„åŠŸèƒ½ã€‚åŸºäºå…±äº«å‰ªç²˜æ¿çš„åŸç†ï¼Œæˆ‘ä»¬è¿˜é¢å¤–å®ç°äº†ç”µè„‘ç«¯å¤åˆ¶ï¼Œæ‰‹æœºç«¯ç²˜è´´çš„åŠŸèƒ½ï¼Œä½¿æ‰‹æœºä¸ç”µè„‘ä¹‹é—´äº’ç›¸äº¤äº’çš„åŠŸèƒ½æ›´åŠ å®Œå¤‡ã€‚</p>


